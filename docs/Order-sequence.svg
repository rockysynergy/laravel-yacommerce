<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="832px" preserveAspectRatio="none" style="width:748px;height:832px;" version="1.1" viewBox="0 0 748 832" width="748px" zoomAndPan="magnify"><defs><filter height="300%" id="f1ruzp5q96zzil" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1ruzp5q96zzil)" height="424.8071" style="stroke: #000000; stroke-width: 2.0;" width="724" x="13" y="106.1201"/><rect fill="#FFFFFF" filter="url(#f1ruzp5q96zzil)" height="146.772" style="stroke: #000000; stroke-width: 2.0;" width="369" x="150.5" y="174.6289"/><rect fill="#FFFFFF" filter="url(#f1ruzp5q96zzil)" height="156.772" style="stroke: #000000; stroke-width: 2.0;" width="576.5" x="150.5" y="335.4009"/><rect fill="#FFFFFF" filter="url(#f1ruzp5q96zzil)" height="83.2632" style="stroke: #000000; stroke-width: 2.0;" width="247.5" x="13" y="544.9272"/><rect fill="#FFFFFF" filter="url(#f1ruzp5q96zzil)" height="83.2632" style="stroke: #000000; stroke-width: 2.0;" width="698.5" x="13" y="642.1904"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="40" x2="40" y1="89.1201" y2="742.4536"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="205.5" x2="205.5" y1="89.1201" y2="742.4536"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="372.5" x2="372.5" y1="89.1201" y2="742.4536"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="480.5" x2="480.5" y1="89.1201" y2="742.4536"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="574.5" x2="574.5" y1="89.1201" y2="742.4536"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="656.5" x2="656.5" y1="89.1201" y2="742.4536"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="23" y="86.0439">User</text><ellipse cx="40.5" cy="13" fill="#FEFECE" filter="url(#f1ruzp5q96zzil)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M40.5,21 L40.5,48 M27.5,29 L53.5,29 M40.5,48 L27.5,63 M40.5,48 L53.5,63 " fill="none" filter="url(#f1ruzp5q96zzil)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="23" y="757.4976">User</text><ellipse cx="40.5" cy="770.5737" fill="#FEFECE" filter="url(#f1ruzp5q96zzil)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M40.5,778.5737 L40.5,805.5737 M27.5,786.5737 L53.5,786.5737 M40.5,805.5737 L27.5,820.5737 M40.5,805.5737 L53.5,820.5737 " fill="none" filter="url(#f1ruzp5q96zzil)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="160.5" y="86.0439">OrderService</text><path d="M185,42 L185,66 M185,54 L202,54 " fill="none" filter="url(#f1ruzp5q96zzil)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="214" cy="54" fill="#FEFECE" filter="url(#f1ruzp5q96zzil)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="160.5" y="757.4976">OrderService</text><path d="M185,764.5737 L185,788.5737 M185,776.5737 L202,776.5737 " fill="none" filter="url(#f1ruzp5q96zzil)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="214" cy="776.5737" fill="#FEFECE" filter="url(#f1ruzp5q96zzil)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f1ruzp5q96zzil)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="78" x="331.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="338.5" y="74.0439">Campaign</text><rect fill="#FEFECE" filter="url(#f1ruzp5q96zzil)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="78" x="331.5" y="741.4536"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="338.5" y="764.4976">Campaign</text><rect fill="#FEFECE" filter="url(#f1ruzp5q96zzil)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="110" x="423.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="430.5" y="74.0439">ProductService</text><rect fill="#FEFECE" filter="url(#f1ruzp5q96zzil)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="110" x="423.5" y="741.4536"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="430.5" y="764.4976">ProductService</text><rect fill="#FEFECE" filter="url(#f1ruzp5q96zzil)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="51" x="547.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="554.5" y="74.0439">Order</text><rect fill="#FEFECE" filter="url(#f1ruzp5q96zzil)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="51" x="547.5" y="741.4536"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="554.5" y="764.4976">Order</text><rect fill="#FEFECE" filter="url(#f1ruzp5q96zzil)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="612.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="619.5" y="74.0439">PayService</text><rect fill="#FEFECE" filter="url(#f1ruzp5q96zzil)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="612.5" y="741.4536"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="619.5" y="764.4976">PayService</text><path d="M13,106.1201 L131,106.1201 L131,115.1201 L121,125.1201 L13,125.1201 L13,106.1201 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="424.8071" style="stroke: #000000; stroke-width: 2.0;" width="724" x="13" y="106.1201"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="28" y="122.0181">make order</text><polygon fill="#A80036" points="193.5,150.6289,203.5,154.6289,193.5,158.6289,197.5,154.6289" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="40.5" x2="199.5" y1="154.6289" y2="154.6289"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="47.5" y="149.7725">makeOrder(array  info)</text><path d="M210,130.8745 L210,157.8745 L682,157.8745 L682,140.8745 L672,130.8745 L210,130.8745 " fill="#FBFB77" filter="url(#f1ruzp5q96zzil)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M672,130.8745 L672,140.8745 L682,140.8745 L672,130.8745 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="451" x="216" y="150.7725">['ship_address' =&gt; array | int, 'items' =&gt; array, 'shop_id' =&gt; int, 'user_id' =&gt; int]</text><path d="M150.5,174.6289 L514.5,174.6289 L514.5,183.6289 L504.5,193.6289 L150.5,193.6289 L150.5,174.6289 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="146.772" style="stroke: #000000; stroke-width: 2.0;" width="369" x="150.5" y="174.6289"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="319" x="165.5" y="190.5269">campaign checks qualification and calculate price</text><polygon fill="#A80036" points="360.5,214.1377,370.5,218.1377,360.5,222.1377,364.5,218.1377" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="205.5" x2="366.5" y1="218.1377" y2="218.1377"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="212.5" y="213.2813">isQualified(array info)</text><polygon fill="#A80036" points="216.5,245.8921,206.5,249.8921,216.5,253.8921,212.5,249.8921" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="210.5" x2="371.5" y1="249.8921" y2="249.8921"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="222.5" y="245.0356">True | False</text><polygon fill="#A80036" points="360.5,277.6465,370.5,281.6465,360.5,285.6465,364.5,281.6465" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="205.5" x2="366.5" y1="281.6465" y2="281.6465"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="212.5" y="276.79">calculatePrice(array info)</text><polygon fill="#A80036" points="216.5,309.4009,206.5,313.4009,216.5,317.4009,212.5,313.4009" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="210.5" x2="371.5" y1="313.4009" y2="313.4009"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="222.5" y="308.5444">price: int</text><path d="M150.5,335.4009 L303.5,335.4009 L303.5,344.4009 L293.5,354.4009 L150.5,354.4009 L150.5,335.4009 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="156.772" style="stroke: #000000; stroke-width: 2.0;" width="576.5" x="150.5" y="335.4009"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="165.5" y="351.2988">order transaction</text><polygon fill="#A80036" points="468.5,374.9097,478.5,378.9097,468.5,382.9097,472.5,378.9097" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="205.5" x2="474.5" y1="378.9097" y2="378.9097"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="181" x="212.5" y="374.0532">deductInventory(array products)</text><polygon fill="#A80036" points="563,406.6641,573,410.6641,563,414.6641,567,410.6641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="205.5" x2="569" y1="410.6641" y2="410.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="212.5" y="405.8076">makeOrder(array  info)</text><path d="M432,423.6641 L432,450.6641 L713,450.6641 L713,433.6641 L703,423.6641 L432,423.6641 " fill="#FBFB77" filter="url(#f1ruzp5q96zzil)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M703,423.6641 L703,433.6641 L713,433.6641 L703,423.6641 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="260" x="438" y="443.562">throws IllegalArtument Exception upon failure</text><polygon fill="#A80036" points="645,480.1729,655,484.1729,645,488.1729,649,484.1729" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="205.5" x2="651" y1="484.1729" y2="484.1729"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="173" x="212.5" y="479.3164">makePayment(array payData)</text><polygon fill="#A80036" points="645,518.9272,655,522.9272,645,526.9272,649,522.9272" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="205.5" x2="651" y1="522.9272" y2="522.9272"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="212.5" y="518.0708">Pay(Order order)</text><path d="M13,544.9272 L145,544.9272 L145,553.9272 L135,563.9272 L13,563.9272 L13,544.9272 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="83.2632" style="stroke: #000000; stroke-width: 2.0;" width="247.5" x="13" y="544.9272"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="87" x="28" y="560.8252">get my orders</text><polygon fill="#A80036" points="193.5,584.436,203.5,588.436,193.5,592.436,197.5,588.436" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="40.5" x2="199.5" y1="588.436" y2="588.436"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="47.5" y="583.5796">getMyOrders(array data)</text><polygon fill="#A80036" points="51.5,616.1904,41.5,620.1904,51.5,624.1904,47.5,620.1904" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="45.5" x2="204.5" y1="620.1904" y2="620.1904"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="71" x="57.5" y="615.334">Array orders</text><path d="M13,642.1904 L132,642.1904 L132,651.1904 L122,661.1904 L13,661.1904 L13,642.1904 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="83.2632" style="stroke: #000000; stroke-width: 2.0;" width="698.5" x="13" y="642.1904"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="74" x="28" y="658.0884">repay order</text><polygon fill="#A80036" points="645,681.6992,655,685.6992,645,689.6992,649,685.6992" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="40.5" x2="651" y1="685.6992" y2="685.6992"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="47.5" y="680.8428">repay(int orderId)</text><polygon fill="#A80036" points="51.5,713.4536,41.5,717.4536,51.5,721.4536,47.5,717.4536" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="45.5" x2="656" y1="717.4536" y2="717.4536"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="57.5" y="712.5972">Array payload</text><!--
@startuml Order-sequence
actor User
boundary OrderService

group make order
    User -> OrderService: makeOrder(array  info)
    note right : ['ship_address' => array | int, 'items' => array, 'shop_id' => int, 'user_id' => int]
    group campaign checks qualification and calculate price
        OrderService -> Campaign: isQualified(array info)
        Campaign - -> OrderService: True | False
        OrderService -> Campaign: calculatePrice(array info)
        Campaign - -> OrderService: price: int
    end
    group order transaction
        OrderService -> ProductService: deductInventory(array products)
        OrderService -> Order: makeOrder(array  info)
        note over Order : throws IllegalArtument Exception upon failure
        OrderService -> PayService: makePayment(array payData)
    end
    OrderService -> PayService: Pay(Order order)
end

group get my orders
    User -> OrderService: getMyOrders(array data)
    OrderService - -> User: Array orders
end

group repay order
    User -> PayService: repay(int orderId)
    PayService - -> User: Array payload
end
@enduml

PlantUML version 1.2019.09(Tue Aug 27 00:19:51 CST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 11.0.5+10-LTS
Operating System: Windows 7
OS Version: 6.1
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>